<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Go/Gin Gower is a project based on the Go language and the Gin framework.">
<meta name="author" content="falling-ts">

<title>Exceptions · Go/Gin Gower Docs</title>

<link rel="canonical" href="../../../en/single/exceptions/">









<link rel="stylesheet" href="../../../scss/base.css" integrity="">



<link rel="stylesheet" href="../../../scss/theme/default.css" integrity="">



  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  
  <link rel="stylesheet" href="../../../scss/component/docsearch.css" integrity=""/>

<link rel="manifest" href="../../../manifest.json">
<link rel="icon" href="../../../img/icon/favicon.ico">
<link rel="icon" href="../../../img/icon/icon-16.png" sizes="16x16" type="image/png">
<link rel="icon" href="../../../img/icon/icon-32.png" sizes="32x32" type="image/png">
<link rel="apple-touch-icon" href="../../../img/icon/icon-180.png" sizes="180x180">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#121212" media="(prefers-color-scheme: dark)">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-00000000"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-00000000');
</script>


  

  </head>
  <body>
    <header id="site-header">
  
  <div id="site-header-brand">
    <a href="../../../">Go/Gin Gower Docs</a>
  </div>

  
  <div id="site-header-controls">
    
    <div class="dropdown">
      <button class="dropdown-btn" aria-haspopup="menu" aria-label="theme selector">
        <i class="icon icon-brightness"></i>
        <i class="icon icon-select"></i>
      </button>
      <ul role="menu" class="dropdown-menu">
        <li role="menuitem"><button class="color-scheme" data-value="light"><i class="icon icon-light-mode"></i> Light</button></li>
        <li role="menuitem"><button class="color-scheme" data-value="dark"><i class="icon icon-dark-mode"></i> Dark &nbsp;</button></li>
        <li role="menuitem"><button class="color-scheme" data-value="night"><i class="icon icon-night-mode"></i> Night</button></li>
      </ul>
    </div>

    
    <div class="dropdown">
      <button class="dropdown-btn" aria-haspopup="menu" aria-label="language selector">
        <i class="icon icon-translate"></i>
        <i class="icon icon-select"></i>
      </button>
      <ul role="menu" class="dropdown-menu">
        
          
          <li role="menuitem"><a href="../../../single/%E5%BC%82%E5%B8%B8/">中文</a></li>
          
          <li role="menuitem"><a href="../../../en/single/exceptions/">English</a></li>
          
        
      </ul>
    </div>
  </div>

  
  <div id="site-header-menu">
    <nav>
      <ul>
        
        
        
          
          <li><a href="../../../" ><svg t="1731853730249" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="883" width="200" height="200"><path d="M466.48888853 821.99893333A182.13546667 182.13546667 0 0 1 512 463.64444479a182.0444448 182.0444448 0 0 1 45.51111147 358.35448854V918.75555519h227.5555552v-364.08888853a45.51111147 45.51111147 0 0 1 45.51111146-45.51111147h17.93137707L512 206.27911146 175.4908448 509.15555519H193.42222187a45.51111147 45.51111147 0 0 1 45.51111146 45.51111147v364.08888853h91.02222187a45.51111147 45.51111147 0 0 1 0 91.02222294H193.42222187a45.51111147 45.51111147 0 0 1-45.5111104-45.51111147v-364.08888853H56.88888853c-41.68817813 0-61.44-51.4275552-30.44693333-79.32586667l455.11111147-409.6a45.51111147 45.51111147 0 0 1 60.89386666 0l455.11111147 409.6C1028.55111147 548.75022186 1008.79928853 600.17777813 967.11111147 600.17777813h-91.02222294v364.08888853a45.51111147 45.51111147 0 0 1-45.5111104 45.51111147h-318.57777813a45.51111147 45.51111147 0 0 1-45.51111147-45.51111147v-142.26773333zM512 736.71111146a91.02222187 91.02222187 0 1 0 0-182.0444448 91.02222187 91.02222187 0 0 0 0 182.0444448z" fill="#2c2c2c" p-id="884"></path></svg>Home</a></li>
        
          
          <li><a href="../../../workspace/%E4%BB%8B%E7%BB%8D/" ><svg t="1731853749882" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1030" width="200" height="200"><path d="M941.48136843 320.91117833a58.73434594 58.73434594 0 0 0-29.56686-50.74309969L546.72469031 61.2022452a58.73434594 58.73434594 0 0 0-58.73434594 1e-8l-363.59044406 211.76239406a58.73434594 58.73434594 0 0 0-28.76811094 51.14247468v420.72729094a58.73434594 58.73434594 0 0 0 29.56592344 50.74309969l363.59231906 208.16614594a58.73434594 58.73434594 0 0 0 58.33403344 0l365.18981812-210.9627075a58.73434594 58.73434594 0 0 0 29.56686-51.14247469zM516.75939281 122.73315177l307.65453375 176.20303781-141.84086625 90.69745406-134.24993344-76.71371156a59.93247001 59.93247001 0 0 0-59.9315325 0L353.74134843 392.8305177l-142.24024125-91.4971425z m0 567.76284281l-119.86494094-69.12184125 114.27181875-70.72121437L623.43746437 630.56352364zM382.11008437 453.96111177l105.480885-61.53090656v105.48182249a25.17186281 25.17186281 0 0 0 0 2.79656063h-4.39499719l-100.68745031 64.32840562z m161.81804437 44.35029094V388.83489458l112.27400719 63.12840563V581.41792302L542.72812967 501.50827583a27.56904844 27.56904844 0 0 0 2e-8-4.79437312zM163.55550562 351.27678833l150.6308625 95.49276469v170.60803968a59.93247001 59.93247001 0 0 0 29.96623501 51.54278719l140.64180561 79.90964813v173.00616375l-319.64046561-183.39365907z m389.56199344 570.9587775V749.23033958l141.44055468-79.90964719a59.93247001 59.93247001 0 0 0 29.9671725-51.94216219V445.57049146l150.23148844-95.09245313V737.6428452z m0 0" fill="#2c2c2c" p-id="1031"></path></svg>Workspace Mode</a></li>
        
          
          <li><a href="../../../single/%E5%89%8D%E8%A8%80/" ><svg t="1731853765799" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1314" width="200" height="200"><path d="M512 57.5822816c-262.31427627 0-475.75105173 213.43493973-475.75105173 475.75105173 0 262.3491392 213.40191147 475.75105173 475.75105173 475.75105173S987.75105173 795.68247253 987.75105173 533.33333333C987.75105173 271.01905706 774.3491392 57.5822816 512 57.5822816zM512 940.8177184c-224.6992608 0-407.48438507-182.81815147-407.48438507-407.48438507 0-224.6992608 182.78328853-407.48438507 407.48438507-407.48438507 224.66623253 0 407.48438507 182.78328853 407.48438507 407.48438507C919.48438507 757.99956586 736.66623253 940.8177184 512 940.8177184z" fill="#2c2c2c" p-id="1315"></path><path d="M512 362.667584c-94.1054304 0-170.667584 76.56031893-170.667584 170.66574933s76.56031893 170.667584 170.667584 170.667584 170.667584-76.56031893 170.667584-170.667584S606.1054304 362.667584 512 362.667584z" fill="#2c2c2c" p-id="1316"></path></svg>Single Mode</a></li>
        
      </ul>
    </nav>
  </div>

  
  <div id="site-header-search"></div>
</header>
    
<div id="site-main-content-wrapper">
  
  
    


<aside id="sidebar">
  <span class="btn-close"><i class="icon icon-close"></i></span>

  <div class="sticky"><strong class="sidebar-section">Introduction</strong>
          
          <a id="en-0-0" class="sidebar-link " href="../../../en/single/preface/#en-0-0">
            
              Preface
            
          </a>
        
          
          <a id="en-0-1" class="sidebar-link " href="../../../en/single/installation/#en-0-1">
            
              Installation
            
          </a>
        
          
          <a id="en-0-2" class="sidebar-link " href="../../../en/single/directory-structure/#en-0-2">
            
              Directory Structure
            
          </a>
        <strong class="sidebar-section">Basic Content</strong>
          
          <a id="en-1-0" class="sidebar-link " href="../../../en/single/routing/#en-1-0">
            
              Routing
            
          </a>
        
          
          <a id="en-1-1" class="sidebar-link " href="../../../en/single/controllers/#en-1-1">
            
              Controllers
            
          </a>
        
          
          <a id="en-1-2" class="sidebar-link " href="../../../en/single/request-validator/#en-1-2">
            
              Request Validator
            
          </a>
        
          
          <a id="en-1-3" class="sidebar-link current" href="../../../en/single/exceptions/#en-1-3">
            
              Exceptions
            
          </a>
        
          
          <a id="en-1-4" class="sidebar-link " href="../../../en/single/responses/#en-1-4">
            
              Responses
            
          </a>
        <strong class="sidebar-section">Frontend Related</strong>
          
          <a id="en-2-0" class="sidebar-link " href="../../../en/single/templates/#en-2-0">
            
              Templates
            
          </a>
        
          
          <a id="en-2-1" class="sidebar-link " href="../../../en/single/frontend-build/#en-2-1">
            
              Frontend Build
            
          </a>
        
          
          <a id="en-2-2" class="sidebar-link " href="../../../en/single/packaging/#en-2-2">
            
              Packaging
            
          </a>
        <strong class="sidebar-section">Service Introduction</strong>
          
          <a id="en-3-0" class="sidebar-link " href="../../../en/single/auth-jwt-service/#en-3-0">
            
              auth-JWT Service
            
          </a>
        
          
          <a id="en-3-1" class="sidebar-link " href="../../../en/single/cache-cache-service/#en-3-1">
            
              cache-Cache Service
            
          </a>
        
          
          <a id="en-3-2" class="sidebar-link " href="../../../en/single/config-configuration-service/#en-3-2">
            
              config-Configuration Service
            
          </a>
        
          
          <a id="en-3-3" class="sidebar-link " href="../../../en/single/cookie-cookie-service/#en-3-3">
            
              cookie-Cookie Service
            
          </a>
        
          
          <a id="en-3-4" class="sidebar-link " href="../../../en/single/db-database-service/#en-3-4">
            
              db-Database Service
            
          </a>
        
          
          <a id="en-3-5" class="sidebar-link " href="../../../en/single/exception-exception-service/#en-3-5">
            
              exception-Exception Service
            
          </a>
        
          
          <a id="en-3-6" class="sidebar-link " href="../../../en/single/logger-logging-service/#en-3-6">
            
              logger-Logging Service
            
          </a>
        
          
          <a id="en-3-7" class="sidebar-link " href="../../../en/single/passwd-password-hashing-service/#en-3-7">
            
              passwd-Password Hashing Service
            
          </a>
        
          
          <a id="en-3-8" class="sidebar-link " href="../../../en/single/response-response-service/#en-3-8">
            
              response-Response Service
            
          </a>
        
          
          <a id="en-3-9" class="sidebar-link " href="../../../en/single/route-routing-service/#en-3-9">
            
              route-Routing Service
            
          </a>
        
          
          <a id="en-3-10" class="sidebar-link " href="../../../en/single/symcrypt-symmetric-encryption-service/#en-3-10">
            
              symcrypt-Symmetric Encryption Service
            
          </a>
        
          
          <a id="en-3-11" class="sidebar-link " href="../../../en/single/translate-translation-service/#en-3-11">
            
              translate-Translation Service
            
          </a>
        
          
          <a id="en-3-12" class="sidebar-link " href="../../../en/single/upload-upload-service/#en-3-12">
            
              upload-Upload Service
            
          </a>
        
          
          <a id="en-3-13" class="sidebar-link " href="../../../en/single/util-utility-service/#en-3-13">
            
              util-Utility Service
            
          </a>
        
          
          <a id="en-3-14" class="sidebar-link " href="../../../en/single/validator-validation-service/#en-3-14">
            
              validator-Validation Service
            
          </a>
        <strong class="sidebar-section">Third-party Applications</strong>
          
          <a id="en-4-0" class="sidebar-link " href="../../../en/single/caddy-web-server/#en-4-0">
            
              Caddy Web Server
            
          </a>
        
          
          <a id="en-4-1" class="sidebar-link " href="../../../en/single/log-viewer/#en-4-1">
            
              Log Viewer
            
          </a>
        
          
          <a id="en-4-2" class="sidebar-link " href="../../../en/single/database/#en-4-2">
            
              Database
            
          </a>
        <strong class="sidebar-section">Release</strong>
          
          <a id="en-5-0" class="sidebar-link " href="../../../en/single/release-preface/#en-5-0">
            
              Release Preface
            
          </a>
        
          
          <a id="en-5-1" class="sidebar-link " href="../../../en/single/development-release/#en-5-1">
            
              Development Release
            
          </a>
        
          
          <a id="en-5-2" class="sidebar-link " href="../../../en/single/testing-release/#en-5-2">
            
              Testing Release
            
          </a>
        
          
          <a id="en-5-3" class="sidebar-link " href="../../../en/single/production-release/#en-5-3">
            
              Production Release
            
          </a>
        <strong class="sidebar-section">Other</strong>
          
          <a id="en-6-0" class="sidebar-link " href="../../../en/single/configuration/#en-6-0">
            
              Configuration
            
          </a>
        
          
          <a id="en-6-1" class="sidebar-link " href="../../../en/single/testing/#en-6-1">
            
              Testing
            
          </a>
        
          
          <a id="en-6-2" class="sidebar-link " href="../../../en/single/utils/#en-6-2">
            
              Utils
            
          </a>
        
          
          <a id="en-6-3" class="sidebar-link " href="../../../en/single/commands/#en-6-3">
            
              Commands
            
          </a>
        
          
          <a id="en-6-4" class="sidebar-link " href="../../../en/single/advanced-data-processing/#en-6-4">
            
              Advanced Data Processing
            
          </a>
        
  </div>
</aside>

  
  <main>
    <article id="article">
      <nav id="article-nav">
  <button id="article-nav-menu-btn"><i class="icon icon-menu"></i> On this section</button>
  <button id="article-nav-toc-btn"><i class="icon icon-toc"></i> On this page</button>
</nav>
      <header id="article-header">
  <h1>Exceptions</h1>
</header>
      <div id="article-content">
        
        
        <h2 id="exception-service">Exception Service</h2>
<p>The exception service is provided by <code>services/exception/exception.go</code>.</p>
<p>The structure is <code>exception.Service</code>.</p>
<p>This structure implements the <code>services.ExceptionService</code> interface.</p>
<h2 id="exception-content-exception-carrier">Exception Content [Exception Carrier]</h2>
<p>The main content is defined under the <code>app/exceptions</code> package.</p>
<p>Initially, some common exception methods are defined based on the HTTP 400 status code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nf">BadRequest</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 400
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">Unauthorized</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 401
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">Forbidden</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 403
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">NotFound</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 404
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">MethodNotAllowed</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 405
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">NotAcceptable</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 406
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">RequestTimeout</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 408
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">RequestEntityTooLarge</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 413
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">RequestURITooLong</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 414
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">UnsupportedMediaType</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 415
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">UnprocessableEntity</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 422
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">TooManyRequests</span><span class="p">(</span><span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="c1">// 429
</span></span></span></code></pre></div><blockquote>
<p>The method names are the status text of the status codes.</p>
<p>The essence of the exception content is still an implementation of the <code>error</code> interface.</p>
</blockquote>
<p>The essential difference in defining these methods is that the <code>code</code> set when returning JSON is different. This point is also quite important because the frontend sometimes needs to perform different operations based on different codes.</p>
<h3 id="why-its-called-a-carrier">Why It&rsquo;s Called a Carrier</h3>
<p>When the exception service provider registers the exception service, it needs to bind the exception content to the exception service. The purpose of doing this is to define general complex and rarely modified methods on the service, while simple and frequently modified methods are defined on the carrier. This way, when using the exception service, we only need to modify the code under <code>app/exceptions</code>.</p>
<p>Below is the registration code of the provider:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Create a new carrier
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">e</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">exceptions</span><span class="p">.</span><span class="nx">Exception</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Mount it to the exception service
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">return</span> <span class="nx">exception</span><span class="p">.</span><span class="nf">Mount</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nf">Init</span><span class="p">(</span><span class="nx">ss</span><span class="o">...</span><span class="p">)</span>
</span></span></code></pre></div><blockquote>
<p>Key Point: The actual exception service provided by the service provider is <code>*exceptions.Exception</code>. This allows us to use the 40x methods mentioned above without modifying the <code>services.ExceptionService</code> interface.</p>
</blockquote>
<h2 id="how-to-use">How to Use</h2>
<h3 id="first-lets-talk-about-using-the-service">First, let&rsquo;s talk about using the service</h3>
<ul>
<li>Call the shortcut methods in the <code>app</code> package</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nf">Exception</span><span class="p">().</span><span class="nf">BadRequest</span><span class="p">(</span><span class="s">&#34;Request failed&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span></code></pre></div><ul>
<li>Declare an internal variable in <code>controllers.go</code> in advance [Recommended]</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">excp</span> <span class="p">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">Exception</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><ul>
<li>Do not use shortcut methods, assert manually [Not recommended, as the service may be nil]</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">excp</span> <span class="p">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;exception&#34;</span><span class="p">).(</span><span class="o">*</span><span class="nx">exceptions</span><span class="p">.</span><span class="nx">Exception</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><h3 id="specific-usage">Specific Usage</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">controllers</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;gower/app&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;gower/app/api/requests&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">HelloController</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">app</span><span class="p">.</span><span class="nx">Controller</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">Hello</span> <span class="p">=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">HelloController</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">HelloController</span><span class="p">)</span> <span class="nf">Index</span><span class="p">(</span><span class="nx">req</span> <span class="o">*</span><span class="nx">requests</span><span class="p">.</span><span class="nx">IndexRequest</span><span class="p">,</span> <span class="nx">user</span> <span class="o">*</span><span class="nx">models</span><span class="p">.</span><span class="nx">User</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="nx">any</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">user</span><span class="p">.</span><span class="nx">Name</span> <span class="p">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">Name</span>
</span></span><span class="line"><span class="cl">    <span class="nx">err</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">excp</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="c1">// Return the error directly
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s">&#34;Hello, &#34;</span> <span class="o">+</span> <span class="o">*</span><span class="nx">req</span><span class="p">.</span><span class="nx">Name</span><span class="p">,</span> <span class="nx">app</span><span class="p">.</span><span class="nx">Data</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;key&#34;</span><span class="p">:</span> <span class="s">&#34;value&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="about-parameters">About Parameters</h3>
<p>The exception methods actually create a new exception structure and then return it. For more details, see <code>app/exceptions/exception.go</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// New creates an exception
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">e</span> <span class="o">*</span><span class="nx">Exception</span><span class="p">)</span> <span class="nf">New</span><span class="p">(</span><span class="nx">code</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">args</span> <span class="o">...</span><span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">temp</span> <span class="o">:=</span> <span class="o">*</span><span class="nx">e</span>
</span></span><span class="line"><span class="cl">    <span class="nx">newE</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">temp</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">newE</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="nx">exception</span><span class="p">.</span><span class="nf">New</span><span class="p">()).</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Set</span><span class="p">(</span><span class="nx">newE</span><span class="p">).</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Build</span><span class="p">(</span><span class="nx">args</span><span class="o">...</span><span class="p">).</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Set</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The actual parameters are <code>...any</code>. Here is another method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Set sets the content generically
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">e</span> <span class="o">*</span><span class="nx">Exception</span><span class="p">)</span> <span class="nf">Set</span><span class="p">(</span><span class="nx">arg</span> <span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="nx">arg</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="o">*</span><span class="nx">exception</span><span class="p">.</span><span class="nx">Service</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Service</span> <span class="p">=</span> <span class="nx">arg</span><span class="p">.(</span><span class="o">*</span><span class="nx">exception</span><span class="p">.</span><span class="nx">Service</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="o">*</span><span class="nx">Exception</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">Exception</span> <span class="p">=</span> <span class="nx">e</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="kt">int</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Code</span> <span class="p">=</span> <span class="nx">arg</span><span class="p">.(</span><span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="kt">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Msg</span> <span class="p">=</span> <span class="nx">arg</span><span class="p">.(</span><span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Data</span> <span class="p">=</span> <span class="nx">arg</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">e</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>When the <code>Build</code> method is executed, it loops through the <code>Set</code> method to set the <code>Code</code>, <code>Msg</code>, <code>Data</code>, exception service, or the carrier itself based on the type of the passed parameters.</p>
<p>The benefit of this approach is flexibility. The following calls are all valid:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">excp</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">excp</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="s">&#34;msg&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">excp</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="s">&#34;msg&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">excp</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="s">&#34;msg&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">excp</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="s">&#34;msg&#34;</span><span class="p">,</span> <span class="mi">450</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">excp</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="mi">460</span><span class="p">,</span> <span class="s">&#34;msg&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span></code></pre></div><blockquote>
<p>Note: If there are multiple parameters of the same type, the last one takes effect.</p>
</blockquote>
<h2 id="modifying-the-exception-carrier">Modifying the Exception Carrier</h2>
<h3 id="exception-body-content">Exception Body Content</h3>
<p><code>app/exceptions/exception.go</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Exception is the exception response body
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Exception</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="nx">exception</span><span class="p">.</span><span class="nx">Service</span> <span class="s">`json:&#34;-&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Code</span>               <span class="kt">int</span>    <span class="s">`json:&#34;code&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Msg</span>                <span class="kt">string</span> <span class="s">`json:&#34;msg&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Data</span>               <span class="nx">any</span>    <span class="s">`json:&#34;data&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Set sets the content generically
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">e</span> <span class="o">*</span><span class="nx">Exception</span><span class="p">)</span> <span class="nf">Set</span><span class="p">(</span><span class="nx">arg</span> <span class="nx">any</span><span class="p">)</span> <span class="nx">services</span><span class="p">.</span><span class="nx">Exception</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="nx">arg</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="o">*</span><span class="nx">exception</span><span class="p">.</span><span class="nx">Service</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Service</span> <span class="p">=</span> <span class="nx">arg</span><span class="p">.(</span><span class="o">*</span><span class="nx">exception</span><span class="p">.</span><span class="nx">Service</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="o">*</span><span class="nx">Exception</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">Exception</span> <span class="p">=</span> <span class="nx">e</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="kt">int</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Code</span> <span class="p">=</span> <span class="nx">arg</span><span class="p">.(</span><span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="kt">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Msg</span> <span class="p">=</span> <span class="nx">arg</span><span class="p">.(</span><span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">e</span><span class="p">.</span><span class="nx">Data</span> <span class="p">=</span> <span class="nx">arg</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">e</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><blockquote>
<p>Except for *exception.Service <code>json:&quot;-&quot;</code> and the first two cases, you can modify other parameters of <code>Exception</code>. When adding, deleting, or modifying these parameters, make sure to update the <code>Set</code> function to handle the logic of the structure instance correctly. For example, if you change <code>Msg</code> to <code>Message</code>, you should also change <code>e.Msg = arg.(string)</code> to <code>e.Message = arg.(string)</code></p>
</blockquote>

      </div>
      








  
  
  
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

      
    
        

        
          
        

        
        
      


<footer id="article-footer">
  <time id="article-last-updated" datetime="0001-01-01"><i class="icon icon-calendar"></i>&nbsp;Last updated: 0001-01-01</time>

  
    <a id="article-prev-link" href="../../../single/request-validator/"><i class="icon icon-prev icon-colored"></i> Prev</a>
  

  
    <a id="article-next-link"  href="../../../single/responses/">Next <i class="icon icon-next icon-colored"></i></a>
  
</footer>
    </article>
    <aside id="toc">
  <span class="btn-close"><i class="icon icon-close"></i></span>
  <div class="sticky">
    <strong><i class="icon icon-toc"></i> On this page</strong>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#exception-service">Exception Service</a></li>
    <li><a href="#exception-content-exception-carrier">Exception Content [Exception Carrier]</a>
      <ul>
        <li><a href="#why-its-called-a-carrier">Why It&rsquo;s Called a Carrier</a></li>
      </ul>
    </li>
    <li><a href="#how-to-use">How to Use</a>
      <ul>
        <li><a href="#first-lets-talk-about-using-the-service">First, let&rsquo;s talk about using the service</a></li>
        <li><a href="#specific-usage">Specific Usage</a></li>
        <li><a href="#about-parameters">About Parameters</a></li>
      </ul>
    </li>
    <li><a href="#modifying-the-exception-carrier">Modifying the Exception Carrier</a>
      <ul>
        <li><a href="#exception-body-content">Exception Body Content</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</aside>
  </main>
</div>

    <footer id="site-footer">
  
  <div id="site-footer-copyright">
    <a href="https://falling-ts.github.io" target="_blank">
      <i class="icon icon-copyright"></i> 2024 falling-ts
    </a>
  </div>

  
  <div id="site-footer-social">

    

    

    

    

  </div>

  
  <div id="site-footer-fund">

    

    

  </div>

  
  <div id="site-footer-love">
    Made with <i class="icon icon-love icon-colored"></i> &nbsp;from&nbsp;<a href="https://docura.github.io/" target="_blank">Docura</a>
  </div>
</footer>
    






<script type="text/javascript" src="../../../js/base.min.js"></script>



  
  <script src="../../../js/component/docsearch.min.js"></script>
  <script type="application/javascript">
      docsearch({
          container: '#site-header-search',
          appId: '',
          indexName: '',
          apiKey: '',
      });
  </script>


<script type="application/javascript">
    if('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js?2024-11-24')
            .catch(function(err) {console.error('ServiceWorker registration failed: ', err);});
    }
</script>
  </body>
</html>